<html>

<head>
    <meta charset="UTF-8">
    <title>Edit Product</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    
</head>

<body >
<style>
.sidebar-container {
  position: fixed;
  width: 220px;
  height: 100%;
  left: 0;
  overflow-x: hidden;
  overflow-y: auto;
  background: #1a1a1a;
  color: #fff;
}

.content-container {
  padding-top: 20px;
}

.sidebar-logo {
  padding: 10px 15px 10px 30px;
  font-size: 20px;
  background-color: #2574A9;
}

.sidebar-navigation {
  padding: 0;
  margin: 0;
  list-style-type: none;
  position: relative;
}

.sidebar-navigation li {
  background-color: transparent;
  position: relative;
  display: inline-block;
  width: 100%;
  line-height: 20px;
}

.sidebar-navigation li a {
  padding: 10px 15px 10px 30px;
  display: block;
  color: #fff;
}

.sidebar-navigation li .fa {
  margin-right: 10px;
}

.sidebar-navigation li a:active,
.sidebar-navigation li a:hover,
.sidebar-navigation li a:focus {
  text-decoration: none;
  outline: none;
}

.sidebar-navigation li::before {
  background-color: #2574A9;
  position: absolute;
  content: '';
  height: 100%;
  left: 0;
  top: 0;
  -webkit-transition: width 0.2s ease-in;
  transition: width 0.2s ease-in;
  width: 3px;
  z-index: -1;
}

.sidebar-navigation li:hover::before {
  width: 100%;
}

.sidebar-navigation .header {
  font-size: 12px;
  text-transform: uppercase;
  background-color: #151515;
  padding: 10px 15px 10px 30px;
}

.sidebar-navigation .header::before {
  background-color: transparent;
}

.content-container {
  padding-left: 220px;
}
</style>

<body>
    <div class="sidebar-container">
  <div class="sidebar-logo">
    E-Commerce
  </div>
  <ul class="sidebar-navigation">
    <li class="header">Navigation</li>
    <li>
      <a href="../index.html">
        <i class="fa fa-home" aria-hidden="true"></i> Home Page
      </a>
    </li>
    <li>
      <a href="./edit.html">
        <i class="fa fa-users" aria-hidden="true"></i> แก้ไขข้อมูลบัญชี
      </a>
    </li>
    <li>
      <a href="./history.html">
        <i class="fa fa-tachometer" aria-hidden="true"></i> ประวัติรายการสั่งซื้อ
      </a>
    </li>
    <li>
      <a href="./itemsale.html">
        <i class="fa fa-home" aria-hidden="true"></i> จัดการสินค้า
      </a>
    </li>
    <li>
      <a href="./sale.html">
        <i class="fa fa-home" aria-hidden="true"></i> ดูยอดขาย
      </a>
    </li>
    <li class="header">Another Menu</li>
    <li>
      <a href="#">
        <i class="fa fa-cog" aria-hidden="true"></i> Settings
      </a>
    </li>
    <li>
      <a href="#">
        <i class="fa fa-info-circle" aria-hidden="true"></i> Information
      </a>
    </li>
  </ul>
</div>
<body>
<div class="content-container">

  <div class="container-fluid">

    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
<div class="container">
    <h1>Edit Profile</h1>
  	<hr>
	<div class="row">
      <!-- left column -->
      <div class="col-md-3">
        <div class="text-center">
          <img src="https://www.flaticon.com/svg/static/icons/svg/847/847969.svg" class="avatar img-circle" alt="avatar">
          <h6>Upload a different photo...</h6>
          
          <input type="file" class="form-control">
        </div>
      </div>
      
      <!-- edit form column -->
      <div class="col-md-9 personal-info">
        <div class="alert alert-info alert-dismissable">
          <a class="panel-close close" data-dismiss="alert">×</a> 
          <i class="fa fa-coffee"></i>
          This is an <strong>.alert</strong>. Use this to show important messages to the user.
        </div>
        <h3>Personal info</h3>
        
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-lg-3 control-label">First name:</label>
            <div class="col-lg-8">
              <input id="First" class="form-control" type="text" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Last name:</label>
            <div class="col-lg-8">
              <input id="Last" class="form-control" type="text" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">Email:</label>
            <div class="col-lg-8">
              <input id="Email" class="form-control" type="text" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label">Username:</label>
            <div class="col-md-8">
              <input id="Username" class="form-control" type="text" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-3 control-label">Address :</label>
            <hr>
            <label class="col-md-4 control-label">province :</label>
            <div class="col-md-3">
              <input id="province" class="form-control" type="text" value="">
            </div>
           
            <label class="col-md-2 control-label">district :</label>
            <div class="col-md-3">
              <input id="district" class="form-control" type="text" value="">
            </div>


            <label class="col-md-2 control-label">sub_district :</label>
            <div class="col-md-3">
              <input id="sub_district" class="form-control" type="text" value="">
            </div>

            <label class="col-md-2 control-label">road :</label>
            <div class="col-md-3">
              <input id="road" class="form-control" type="text" value="">
            </div>

            <label class="col-md-2 control-label">number :</label>
            <div class="col-md-3">
              <input id="number" class="form-control" type="text" value="">
            </div>

            <label class="col-md-2 control-label">postal_code :</label>
            <div class="col-md-3">
              <input id="postal_code" class="form-control" type="text" value="">
            </div>
            <label class="col-md-2 control-label">Shop Name :</label>
            <div class="col-md-3">
              <input id="shopName" class="form-control" type="text" value="">
            </div>

          </div>
        
          <div class="form-group">
            <label class="col-md-3 control-label"></label>
            <div class="col-md-8">
              <input type="button" class="btn btn-primary" value="Save Changes" onclick='onSave()'>
              <span></span>
              <input type="reset" class="btn btn-default" value="Cancel">
            </div>
          </div>
        </form>
      </div>
  </div>
</div>
  </div>

  </div>
</div>
<hr>
 <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

let First = document.getElementById("First");
let Last = document.getElementById("Last");
let Email = document.getElementById("Email");
let Username = document.getElementById("Username");
let Password = document.getElementById("Password");
let Province = document.getElementById("province");
let District = document.getElementById("district");
let Sub_district = document.getElementById("sub_district");
let Road = document.getElementById("road");
let Numbern = document.getElementById("number");
let Postal_code = document.getElementById("postal_code");
let Shop = document.getElementById("shopName");
let create = ''
let current = '1'
// axios
// let one =
//   "http://localhost:8080/getSales?SALES_id="+current;
// let two =
// "http://localhost:8080/getAddressbySales?SALES_id="+current;


// const requestOne = axios.get(one);
// const requestTwo = axios.get(two);


// axios
//   .all([requestOne, requestTwo])
//   .then(
//     axios.spread((...responses) => {
//       const responseOne = responses[0];
//       const responseTwo = responses[1];
     
axios

  .get('http://localhost:8080/getSales?SALES_id='+current) 
  // .get('http://localhost:8080/getAddress?My_address_id='+current)
  .then(response => response.data)
 .then(data => {console.log(data)
 First.value = data.firstName
 Last.value = data.lastName
 Email.value = data.email
 Username.value = data.userName

 create = data.dateCreated
    })
.catch((error) => {
  console.log(error)
}
);

axios
  .get('http://localhost:8080/getAddress?My_address_id='+current)
  .then(response => response.data)
 .then(data => {console.log(data)
 Province.value = data.province
 District.value = data.district
  Sub_district.value = data.sub_district
  Road.value = data.road
  Numbern.value = data.number
  Postal_code.value = data.postal_code
    })
.catch((error) => {
  console.log(error)
}
);
axios
  .get('http://localhost:8080//getShopbysalesid?SALES_id='+current)
  .then(response => response.data)
 .then(data => {console.log(data)
 Shop.value = data.shopName

    })
.catch((error) => {
  console.log(error)
}
);

function onSave(){
 
  let data ={}
  if(Password.value==""){
  data = {"userName":Username.value,"password":"ffff","firstName":First.value,"lastName":Last.value ,"email":Email.value,"dateCreated":create,"sales_id":current}
  }
  else{
  data = {"userName":Username.value,"password":Password.value,"firstName":First.value,"lastName":Last.value ,"email":Email.value,"dateCreated":create,"sales_id":current}
  }
  
 axios.put("https://4c52b9aa1168.ngrok.io/updateSales", data, { useCredentails: true }, {headers: { 'Content-Type': "application/json"}})
                .then(response => {
                    console.log("response: ", response.data)

                })
                .catch(err => {
                    console.error(err)
                })

  
}

</script>

</body>

</html>